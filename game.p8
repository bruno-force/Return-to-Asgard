pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
-- return to asa
-- by bam
#include lib/console.lua
#include lib/interface.lua
#include lib/stage.lua
#include lib/collisions.lua
#include lib/objects.lua
#include lib/body.lua
#include lib/animation.lua
#include lib/emitter.lua
#include lib/particle.lua
#include lib/player.lua
#include lib/enemies.lua

gv=.3--gravity

function _init()
  toggledebug()
  stage:init()
end

function _update60()
  console:log('game','loaded')
  if(debug:breakpoint()) return nil
  stage:update()
  bodies:update()
  add_logs()
end

function _draw()
  if(debug.active) then
    local dbgx=64 local dbgy=60
    local m='press , to advance a frame'
    rectfill(dbgx-2 -(#m*2),dbgy-2,dbgx-(#m*2)+#m*4,dbgy+6,3)
    print(m, dbgx - (#m * 2), dbgy, 2) 
  end
  if(debug.stopped) return nil
  cls()
  stage:draw()
  bodies:draw()
  console:draw()
end

function add_logs()
end

__gfx__
00000000000000000000000000000000000000002222222200000000000000000000000000000000000000000000000000000000000000000000000000000000
08000080005555000055550000555500005555004444444400000000000000000000000000000000000000000000000000000000000000000000000000000000
00800800005fff00005fff00005fff00005fff004444444400000000000000000000000000000000000000000000000000000000000000000000000000000000
000880000041ff100041ff100041ff100041ff100400004000000000000000000000000000000000000000000000000000000000000000000000000000000000
00088000064444600644440000644400006444002222222200000000000000000000000000000000000000000000000000000000000000000000000000000000
008008000f1144f00ff144f000ff4400001ff4004444444400000000000000000000000000000000000000000000000000000000000000000000000000000000
080000800f1114f00011140000111400001114004444444400000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000f00f000f000f00000f000000f00f000400004000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000666556656655655566556600665556000000000000000000000000000000000000000000000000000000000
00555500005555000055550000000000000000006655556655555650555555566555055600000000000000000000000000000000000000000000000000000000
005fff00005fff00005fff0000000000000000006550055500005550000000566500505500000000000000000000000000000000000000000000000000000000
0041ff100041ff100041ff1000000000000000006500000000000000050000565505505600000000000000000000000000000000000000000000000000000000
06444260064442600644226000000000000000005500550000000000000000555500005600000000000000000000000000000000000000000000000000000000
0f1144f00f1142f00f1144f000000000000000005500550000550050000500556505005500000000000000000000000000000000000000000000000000000000
0f1114f00f1114f00f1114f000000000000000006500550000550000000000566500505600000000000000000000000000000000000000000000000000000000
00f00f0000f00f0000f00f0000000000000000006500000000000000000000555500005600000000000000000000000000000000000000000000000000000000
00555500005555000000000000000000000000005500000000000000000000556600006600000000000000000000000000000000000000000000000000000000
005fff00005fff000055550000000000000000005500000000000550000000566500505600000000000000000000000000000000000000000000000000000000
0041ff1f0041ff1f005fff0000555500000000006550550000000550050000566505505500000000000000000000000000000000000000000000000000000000
0644446ff644446ff041ff1f005fff00000000006650550005500500550000555500005600000000000000000000000000000000000000000000000000000000
0ff1440000114400064444600041ff10000000005550000005500000000005565505505600000000000000000000000000000000000000000000000000000000
00111f0000f11f000011440006444460000000006650055000000000000005666505505500000000000000000000000000000000000000000000000000000000
00f00f0000f00f0000f11f000ff14ff0000000006650005000005000005005556500505600000000000000000000000000000000000000000000000000000000
00f000000000000000f00f0000f11f00000000006550000000000000000000055500005600000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000110006500000000000000000005556505000500000000000000000000000000000000000000000000000000000000
00777600007776000077760000777600001191006500500000500050050005666505505500000000000000000000000000000000000000000000000000000000
077070600770706007707060077070600d1991105500000000500000055005666505505600000000000000000000000000000000000000000000000000000000
07707060077070600770706007707060119999116500000000500000055005556500005500000000000000000000000000000000000000000000000000000000
00777700007777000077770000777700119aa91d6500000000000000000000565500005500000000000000000000000000000000000000000000000000000000
00666600006666000066660000667600d19aa9116555550000005550000000566550505600000000000000000000000000000000000000000000000000000000
07666670007666700067660000666600014444106655655550005650555555566655555600000000000000000000000000000000000000000000000000000000
00700600070006000007000000600700001441000666655656655656665566600665566000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000301030300000000000000000000000003000302000000000000000000000000030103030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000464600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2701000000000000004600000000000000460000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0016161616161700340000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000002700000018051516161616175656150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000262616161627052500000000275656250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0036363636363636363637053536363636375656250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000046464646050000000000003400255656560000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700264630464600000046050000003000000000250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0016161616161617050000151616161616161616000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2700000000000000050000000000000000000000250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2746340000000000050000000000004634460000250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2746000000151616161616161700000000000000250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0016161616000000000000000016161616161616000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
5050505050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
00010000037230372303733047430574306743097430c7430e7330b7230872306723067131510015100151001510015100151001510015100151000c1000c1000b1000c1000c1000c1000c1000c1000c1000c100
000100000161006610106101c6100c610086100661004610036100161000610116002760026600256002360022600206001e6001c6001a60018600166001460012600116000f6000d6000b600086000760005600

pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
-- return to asa
-- by bam
#include lib/console.lua
#include lib/interface.lua
#include lib/stage.lua
#include lib/collisions.lua
#include lib/objects.lua
#include lib/body.lua
#include lib/animation.lua
#include lib/emitter.lua
#include lib/particle.lua
#include lib/player.lua
#include lib/enemies.lua

gv=.3--gravity

function _init()
  toggledebug()
  stage:init()
end

function _update60()
  console:log('game','loaded')
  if(debug:breakpoint()) return nil
  stage:update()
  bodies:update()
  add_logs()
end

function _draw()
  if(debug.active) then
    local dbgx=64 local dbgy=60
    local m='press , to advance a frame'
    rectfill(dbgx-2 -(#m*2),dbgy-2,dbgx-(#m*2)+#m*4,dbgy+6,3)
    print(m, dbgx - (#m * 2), dbgy, 2) 
  end
  if(debug.stopped) return nil
  cls()
  stage:draw()
  bodies:draw()
  console:draw()
end

function add_logs()
end

__gfx__
00000000000000000000000000000000000000000dddddddddddddddddddddd00ddd1dddddd1ddddddd1ddd00000000000000000000000000000000000000000
0800008000555500005555000055550000555500ddddddddddddddddddddddddddd1dd1ddddd1dddd1dd1ddd0111011101110111000000000000000000000000
00800800005fff00005fff00005fff00005fff00ddd111111111111111111dddddd111111111111111111ddd0000000000000000000000000000000000000000
000880000041ff100041ff100041ff100041ff10dd11111111111111111111dd1111111111111111111111111101110111000001000111000000000000000000
0008800006444460064444000064440000644400dd11111111111111111111dddd01111111111111111110dd0000000000000000000000000006000600000000
008008000f1144f00ff144f000ff4400001ff400dd11111111111111111111ddd1100011111111111100011d0111011101110111011101110607000700003000
080000800f1114f0001114000011140000111400dd11110011111111001111dd1d11110011111111001111d10000000000000000000000000707060703030030
0000000000f00f000f000f00000f000000f00f00d111100001111110000111ddd1111000011111100001111d110111011101110111011101d7d7d7d730300300
0000000000000000000000000000000000000000dd11111111111111111111ddd1100000000000000000011d0000000000000000000000000000000000000000
0055550000555500005555000055550000555500dd11111111111111111111dd1100000000000000000000110111000001110111000000000000000000000000
005fff00005fff00005fff00005555f00f555500dd11111111111111111111dd1100000000000000000000110000000000000000000000000000000000000000
0041ff100041ff100041ff10004444f00f444400dd11111111111111111111dddd11000000000000000011dd1101110000011101000000000000000000000000
0644426006444260064422600644446006444460dd11111111111111111111dddd11000000000000000011dd0000000000000000000000000000000000000000
0f1144f00f1142f00f1144f00011110000111100dd11111111111111111111dd1100000000000000000000110111000001110111000000000000000005000050
0f1114f00f1114f00f1114f00011110000111100dd11111111111111111111dd1100000000000000000000110000000000000000000000000000000005555550
00f00f0000f00f0000f00f0000f0000000000f00dd11111111111111111111ddd1100000000000000000011d1101110000011101000000000000000005000050
0055550000555500000000000000000000000000dd11111000000000011111dd0000000000000000000000001111111100000000111111110000000004444440
005fff00005fff00005555000000000000000000dd11111100000000101111dd0000000000000000000000001111111100000000111111110000000005000050
0041ff1f0041ff1f005fff000055550000000000dd111000000000001101101d0000000000000000000000000111111100000000111111100000000004444440
0644446ff644446ff041ff1f005fff0000000000dd11011100000000111001d10000000000000000000000000111111100000000111111100000000005000050
0ff1440000114400064444600041ff10000000001100111100000000110011dd0110000000000000000000000011111100000000111111000000000004444440
00111f0000f11f00001144000644446000000000dd11011100000000110111dd116d000000000000000000000000011100000000111000000000000005000050
00f00f0000f00f0000f11f000ff14ff000000000dd11011100000000101111dd11d6000000000000000000000000001100000000110000000000000004444440
00f000000000000000f00f0000f11f0000000000dd11101000000000011111dd1000000000000000000000000000000100000000100000000000000005000050
000000000000000000000000000000000dddddddddddddd0dd1ddddd11011111011d66100001110000000000dddddddddddddddddddddddd0000000005004440
00777600007776000077760000777600d11000111100011d1110001100000000d61ddd6101011110000000001111111111111111111111110000000005044500
07707060077070600770706007707060dddd1dddddd1dddddddd1ddd111101116d11ddd111001110000000000111111111111111111111100000000004400500
07707060077070600770706007707060dddd1dddddd1dddddddd1ddd111101111001111110000000000000000111111111111111111111100000000005004440
00777700007777000077770000777700dddd1dddddd1dddddddd1ddd111101111166d11100111000000000000011111111101111111111000000000004444050
00666600006666000066660000667600d00011111111000d10001111000000001d11111101111100000000000000011111000001111000000000000005000050
07666670007666700067660000666600dd1dddddddddd1dddd1ddddd110111111d11111100111000000000000000000100000000000000000000000004444440
00700600070006000007000000600700dd1dddddddddd1dddd1ddddd110111110111111000000000000000000000000000000000000000000000000005000050
00000000000000000000000000000000000000000000000001111110000000000ee00ee000000000000110000000000000000000000000000000000000000000
000000000000d0000000dd000000d0d00000dd000000d020051ed11000000000dddeeddd00eeee00001191000000000000000000000000000000000000000000
00000000000ddd0000000d000000ddd00000d00000000d020ed12500ddddddddd0dddd0d0eedddd00d1991100000000000000000000000000000000000000000
000000000000d0000000d0000000d0d000000d000000d0200d51555065555556d00dd00d0eedddd0119999110000000000000000000000000000000000000000
00990000009900000669dd00005500000055dd000099000005552de065055056dd0dd0dd0eedddd0119aa91d0000000000000000000000000000000000000000
00440000004400000064000000660000006600000044000005595550655555560dd22dd00eeeddd0d19aa9110000000000000000000000000000000000000000
0044400000444000004440000066600000666000004440000c9555c0d0dd0d0d0022220000dddd00014444100000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000cccccc0000000000002200000000000001441000000000000000000000000000000000000000000
__gff__
0000000000050105050105000000000000000000000400040400040000000000000000000004000400000000000000010000000005050501010100010101000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000d000000004a004a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0f010f000000000f00001b00000000001f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0609360a0000050a00000c1b000008072f050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
381616270000181a000008070000151a3f250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1616161700002b380000181a0000251a2f150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1616162d000000000000393800002b392f180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
163817000e0e0000000e00000e0e00002f180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
381617003b3d00000e0600003b3d00002f180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
16161700000000003b2d0000000000003f180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
163817000000000000000000000000002f180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
16162728490000300f0f00300f000f003f360000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
163816380a0e0e36363838383836363606160000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3737373737373737371616393900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
00010000037230372303733047430574306743097430c7430e7330b7230872306723067131510015100151001510015100151001510015100151000c1000c1000b1000c1000c1000c1000c1000c1000c1000c100
000100000161006610106101c6100c610086100661004610036100161000610116002760026600256002360022600206001e6001c6001a60018600166001460012600116000f6000d6000b600086000760005600
